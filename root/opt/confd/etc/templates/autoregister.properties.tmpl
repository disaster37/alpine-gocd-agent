{{- if (exists "/config/agent/key")}} 
agent.auto.register.key={{getv "/config/agent/key"}}
{{- end}}
{{- if (exists "/config/agent/resource")}}
agent.auto.register.resources={{join (getvs "/config/agent/resource") ","}}
{{- end}}
{{- if (exists "/config/agent/environment")}}
agent.auto.register.environments={{join (getvs "/config/agent/environment") ","}}
{{- end}}
{{- if getenv "SCHEDULER_CONTAINER_NAME"}}
agent.auto.register.hostname={{getenv "SCHEDULER_CONTAINER_NAME"}}
agent.auto.register.elasticAgent.agentId={{getenv "SCHEDULER_CONTAINER_NAME"}}
{{- else}} 
    {{- if (exists "/config/agent/name")}}
agent.auto.register.hostname={{getv "/config/agent/name"}}
    {{- end}}
    {{- if (exists "/config/agent/id")}}
agent.auto.register.elasticAgent.agentId={{getv "/config/agent/id"}}
    {{- end}}
{{- end}}
{{- if getenv "SCHEDULER_SERVICE_NAME"}}
agent.auto.register.elasticAgent.pluginId={{getenv "SCHEDULER_SERVICE_NAME"}}
{{- else}}
    {{- if (exists "/config/agent/plugin-id")}}
agent.auto.register.elasticAgent.pluginId={{getv "/config/agent/plugin-id"}}
    {{- end}}
{{- end}}